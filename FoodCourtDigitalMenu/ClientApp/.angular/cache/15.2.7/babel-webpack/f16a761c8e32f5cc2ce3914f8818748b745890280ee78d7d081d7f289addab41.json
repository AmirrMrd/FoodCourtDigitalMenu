{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nlet AddBranchComponent = class AddBranchComponent {\n  constructor(branchSer, formBuilder, res) {\n    this.branchSer = branchSer;\n    this.formBuilder = formBuilder;\n    this.res = res;\n    // addBranchForm :  FormGroup = new FormGroup({}); \n    this.addBranchForm = new FormGroup({\n      branchId: new FormControl(),\n      branchName: new FormControl(''),\n      branchDescription: new FormControl(''),\n      branchPort: new FormControl(''),\n      branchIpAddress: new FormControl(''),\n      branchLogoUrl: new FormControl(''),\n      branchIsActive: new FormControl(false)\n    });\n    this.submitted = false;\n    this.branchUrlbase64 = '';\n    this.obj = {};\n    this.ImgUrl = '';\n    this.OriginUrl = location.origin;\n    this.addBranchForm = this.formBuilder.group({\n      branchId: ['', Validators.required],\n      branchName: ['', [Validators.required, Validators.minLength(3)]],\n      branchDescription: ['', Validators.required],\n      BranchPortNumber: ['', Validators.required],\n      branchIpAddress: ['', [Validators.required, Validators.pattern('(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?(\\.|$)){4}')]],\n      branchIsActive: [true, Validators.requiredTrue],\n      branchLogoUrl: ['', Validators.required]\n    });\n  }\n  // getUrl(event : any) {\n  //   const file : File = event.target.files[0];\n  //   this.ImgUrl = this.OriginUrl + '/assets/background/' + file.name;\n  // }\n  get f() {\n    return this.addBranchForm.controls;\n  }\n  upload(input) {\n    if (input.files && input.files[0]) {\n      var reader = new FileReader();\n      reader.onload = e => {\n        // console.log('Got here: ', e.target.result);\n        this.obj.photoUrl = e.target.result;\n        this.ImgUrl = this.obj.photoUrl;\n      };\n      reader.readAsDataURL(input.files[0]);\n    }\n  }\n  submitBranch() {\n    if (this.addBranchForm.invalid) {\n      this.submitted = true;\n      return console.error(\"فرم به درستی پر نشده است\");\n    } else {\n      const newBranch = this.addBranchForm.value;\n      newBranch.ImageBase64 = this.obj.photoUrl;\n      this.res.postEntity(newBranch, 'CreateBranch').subscribe(data => {\n        console.log(data);\n      });\n      // this.branchSer.createBranch(newBranch).subscribe((data) => {\n      //   console.log(data);\n      //   this.addBranchForm.reset();\n      // });\n      this.addBranchForm.reset();\n      this.ImgUrl = '';\n    }\n  }\n};\nAddBranchComponent = __decorate([Component({\n  selector: 'app-add-branch',\n  templateUrl: './add-branch.component.html',\n  styleUrls: ['./add-branch.component.css']\n})], AddBranchComponent);\nexport { AddBranchComponent };","map":{"version":3,"mappings":"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","names":["Component","FormGroup","FormControl","Validators","AddBranchComponent","constructor","branchSer","formBuilder","res","branchId","branchName","branchDescription","branchPort","branchIpAddress","branchLogoUrl","branchIsActive","location","origin","addBranchForm","group","required","minLength","BranchPortNumber","pattern","requiredTrue","f","controls","upload","input","files","reader","FileReader","onload","e","obj","photoUrl","target","result","ImgUrl","readAsDataURL","submitBranch","invalid","submitted","console","error","newBranch","value","ImageBase64","postEntity","subscribe","data","log","reset","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\am.alimoradi\\source\\repos\\FoodCourtDigitalMenu\\FoodCourtDigitalMenu\\ClientApp\\src\\app\\branches\\add-branch\\add-branch.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators, AbstractControl, FormBuilder } from '@angular/forms';\r\nimport { branch } from 'src/app/Models/BranchModel';\r\nimport { BranchService } from 'src/app/Services/branch.service';\r\nimport { RestApiService } from 'src/app/Services/rest-api.service';\r\n\r\n@Component({\r\n  selector: 'app-add-branch',\r\n  templateUrl: './add-branch.component.html',\r\n  styleUrls: ['./add-branch.component.css']\r\n})\r\n\r\nexport class AddBranchComponent {\r\n  // addBranchForm :  FormGroup = new FormGroup({}); \r\n  addBranchForm: FormGroup = new FormGroup({\r\n    branchId: new FormControl(),\r\n    branchName: new FormControl(''),\r\n    branchDescription: new FormControl(''),\r\n    branchPort: new FormControl(''),\r\n    branchIpAddress: new FormControl(''),\r\n    branchLogoUrl: new FormControl(''),\r\n    branchIsActive: new FormControl(false),\r\n  });\r\n\r\n  public submitted = false;\r\n\r\n\r\n  constructor(private branchSer: BranchService, private formBuilder: FormBuilder , private res : RestApiService<branch>) {\r\n    this.addBranchForm = this.formBuilder.group({\r\n      branchId: ['', Validators.required],\r\n      branchName: ['', [Validators.required, Validators.minLength(3)]],\r\n      branchDescription: ['', Validators.required],\r\n      BranchPortNumber: ['', Validators.required],\r\n      branchIpAddress: ['', [Validators.required, Validators.pattern('(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?(\\.|$)){4}')]],\r\n      branchIsActive: [true, Validators.requiredTrue],\r\n      branchLogoUrl: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n\r\n\r\n  branchUrlbase64 = '';\r\n  public obj: any = {};\r\n  ImgUrl: string = '';\r\n  OriginUrl: string = location.origin;\r\n\r\n  // getUrl(event : any) {\r\n  //   const file : File = event.target.files[0];\r\n  //   this.ImgUrl = this.OriginUrl + '/assets/background/' + file.name;\r\n  // }\r\n\r\n  get f(): { [key: string]: AbstractControl } {\r\n    return this.addBranchForm.controls;\r\n  }\r\n\r\n  public upload(input: any) {\r\n\r\n    if (input.files && input.files[0]) {\r\n      var reader = new FileReader();\r\n      reader.onload = (e: any) => {\r\n        // console.log('Got here: ', e.target.result);\r\n        this.obj.photoUrl = e.target.result;\r\n        this.ImgUrl = this.obj.photoUrl\r\n      }\r\n      reader.readAsDataURL(input.files[0]);\r\n    }\r\n  }\r\n\r\n  submitBranch(): void {\r\n    if (this.addBranchForm.invalid) {\r\n      this.submitted = true;\r\n      return console.error(\"فرم به درستی پر نشده است\");\r\n    }\r\n    else {\r\n      const newBranch: branch = this.addBranchForm.value;\r\n      newBranch.ImageBase64 = this.obj.photoUrl;\r\n      this.res.postEntity<branch>(newBranch,'CreateBranch').subscribe((data) => {\r\n        console.log(data);\r\n      });\r\n      // this.branchSer.createBranch(newBranch).subscribe((data) => {\r\n      //   console.log(data);\r\n      //   this.addBranchForm.reset();\r\n      // });\r\n\r\n      this.addBranchForm.reset();\r\n      this.ImgUrl = '';\r\n    }\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}